<div id="reportContainer">
    <h2 id="reportHead"><i class="fas fa-chart-line"></i> طلبات تحليل الموقع</h2>
    <div class="table-container">
        <table id="inputRequestsTable">
            <thead>
                <tr>
                    <th>رقم الطلب</th>
                    <th>حالة الطلب</th>
                    <th>الأسباب</th>
                    <th>الموقع</th>
                    <th>التاريخ</th>
                </tr>
            </thead>
            <tbody>
                <% combinedData.filter(item => item.type === 'طلب مدخل').forEach((item, index) => { %>
                    <tr>
                        <td><%= index + 1 %></td>
                        <td><%= item.step3Status || 'N/A' %></td>
                        <td><%= item.step3Result || 'N/A' %></td>
                        <td><%= item.location ? `${item.location.lat}, ${item.location.lng}` : 'N/A' %></td>
                        <td><%= new Date(item.createdAt).toLocaleDateString() %></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
    <div class="pagination" id="inputRequestsPagination"></div>
    <br>
    <h2 id="reportHead">الاقتراحات</h2>
    <div class="table-container">
        <table id="recommendationsTable">
            <thead>
                <tr>
                    <th>رقم الاقتراح</th>
                    <th>ملخص</th>
                    <th>نسبة النجاح</th>
                    <th>الموقع</th>
                    <th>التاريخ</th>
                </tr>
            </thead>
            <tbody>
                <% combinedData.filter(item => item.type === 'اقتراح').forEach((item, index) => { %>
                    <tr>
                        <td><%= index + 1 %></td>
                        <td><%= item.summary || 'N/A' %></td>
                        <td><%= item.success_rate || 'N/A' %>%</td>
                        <td><%= item.location ? `${item.location.lat}, ${item.location.lng}` : 'N/A' %></td>
                        <td><%= new Date(item.createdAt).toLocaleDateString() %></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
    </div>
    <div class="pagination" id="recommendationsPagination"></div>
</div>

<div id="reportMessage" style="display: none; color: red;"></div>
